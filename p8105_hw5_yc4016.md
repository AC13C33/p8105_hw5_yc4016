p8105_hw5_yc4016
================
Yishan Chen
2022-11-08

# Problem 1

### Question

-   Create a tidy dataframe containing data from all participants,
    including the subject ID, arm, and observations over time:
    -   Start with a dataframe containing all file names; the list.files
        function will help
    -   Iterate over file names and read in data for each subject using
        purrr::map and saving the result as a new variable in the
        dataframe
    -   Tidy the result; manipulate file names to include control arm
        and subject ID, make sure weekly observations are “tidy”, and do
        any other tidying that’s necessary
-   Make a spaghetti plot showing observations on each subject over
    time, and comment on differences between groups.

# Problem 2

``` r
homicide_df = 
  read_csv("./data/homicide-data.csv") %>% 
  mutate(city_state = str_c(city, state, sep = ", ", collapse = NULL),
         homicide_situation = case_when(disposition == "Closed without arrest" ~ "unsolved",
                                        disposition == "Open/No arrest"        ~ "unsolved",
                                        disposition == "Closed by arrest"      ~ "solved")) %>% 
  select(city_state, homicide_situation, everything()) 
```

    ## Rows: 52179 Columns: 12
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr (9): uid, victim_last, victim_first, victim_race, victim_age, victim_sex...
    ## dbl (3): reported_date, lat, lon
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
homicide_df
```

    ## # A tibble: 52,179 × 14
    ##    city_st…¹ homic…² uid   repor…³ victi…⁴ victi…⁵ victi…⁶ victi…⁷ victi…⁸ city 
    ##    <chr>     <chr>   <chr>   <dbl> <chr>   <chr>   <chr>   <chr>   <chr>   <chr>
    ##  1 Albuquer… unsolv… Alb-…  2.01e7 GARCIA  JUAN    Hispan… 78      Male    Albu…
    ##  2 Albuquer… solved  Alb-…  2.01e7 MONTOYA CAMERON Hispan… 17      Male    Albu…
    ##  3 Albuquer… unsolv… Alb-…  2.01e7 SATTER… VIVIANA White   15      Female  Albu…
    ##  4 Albuquer… solved  Alb-…  2.01e7 MENDIO… CARLOS  Hispan… 32      Male    Albu…
    ##  5 Albuquer… unsolv… Alb-…  2.01e7 MULA    VIVIAN  White   72      Female  Albu…
    ##  6 Albuquer… unsolv… Alb-…  2.01e7 BOOK    GERALD… White   91      Female  Albu…
    ##  7 Albuquer… solved  Alb-…  2.01e7 MALDON… DAVID   Hispan… 52      Male    Albu…
    ##  8 Albuquer… solved  Alb-…  2.01e7 MALDON… CONNIE  Hispan… 52      Female  Albu…
    ##  9 Albuquer… unsolv… Alb-…  2.01e7 MARTIN… GUSTAVO White   56      Male    Albu…
    ## 10 Albuquer… unsolv… Alb-…  2.01e7 HERRERA ISRAEL  Hispan… 43      Male    Albu…
    ## # … with 52,169 more rows, 4 more variables: state <chr>, lat <dbl>, lon <dbl>,
    ## #   disposition <chr>, and abbreviated variable names ¹​city_state,
    ## #   ²​homicide_situation, ³​reported_date, ⁴​victim_last, ⁵​victim_first,
    ## #   ⁶​victim_race, ⁷​victim_age, ⁸​victim_sex

``` r
homicide_number = 
  homicide_df %>% 
  group_by(city_state) %>% 
  count(city_state)

homicide_number
```

    ## # A tibble: 51 × 2
    ## # Groups:   city_state [51]
    ##    city_state          n
    ##    <chr>           <int>
    ##  1 Albuquerque, NM   378
    ##  2 Atlanta, GA       973
    ##  3 Baltimore, MD    2827
    ##  4 Baton Rouge, LA   424
    ##  5 Birmingham, AL    800
    ##  6 Boston, MA        614
    ##  7 Buffalo, NY       521
    ##  8 Charlotte, NC     687
    ##  9 Chicago, IL      5535
    ## 10 Cincinnati, OH    694
    ## # … with 41 more rows

``` r
homicide_number_unsolved = 
  homicide_df %>% 
  group_by(city_state, homicide_situation) %>% 
    count(homicide_situation)

homicide_number_unsolved
```

    ## # A tibble: 101 × 3
    ## # Groups:   city_state, homicide_situation [101]
    ##    city_state      homicide_situation     n
    ##    <chr>           <chr>              <int>
    ##  1 Albuquerque, NM solved               232
    ##  2 Albuquerque, NM unsolved             146
    ##  3 Atlanta, GA     solved               600
    ##  4 Atlanta, GA     unsolved             373
    ##  5 Baltimore, MD   solved              1002
    ##  6 Baltimore, MD   unsolved            1825
    ##  7 Baton Rouge, LA solved               228
    ##  8 Baton Rouge, LA unsolved             196
    ##  9 Birmingham, AL  solved               453
    ## 10 Birmingham, AL  unsolved             347
    ## # … with 91 more rows
